"use strict";(self.webpackChunkfacebook_clone_app_react_client=self.webpackChunkfacebook_clone_app_react_client||[]).push([[500],{1787:function(t,e,n){var r=n(8302),a=(n(2791),n(184));e.Z=function(t){var e=t.post;return(0,a.jsx)("div",{children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("b",{children:(e.body.feelings||e.body.with.length||e.body.at||e.body.date)&&e.user.name}),e.body.feelings?(0,a.jsxs)(a.Fragment,{children:["\xa0 is feeling ",(0,a.jsx)("b",{children:e.body.feelings})]}):null,e.body.with.length?(0,a.jsxs)(a.Fragment,{children:[" with ",(0,a.jsx)("b",{children:e.body.with.map((function(t){return(0,a.jsxs)("span",{children:[" \xa0",t.name,","]},t.id)}))})]}):null,e.body.at?(0,a.jsxs)(a.Fragment,{children:[" at "," ",(0,a.jsxs)("b",{children:[e.body.at," "]})]}):null,e.body.date?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("b",{children:new Date(e.body.date).toLocaleDateString()})}):null]})})}},41:function(t,e,n){n.d(e,{Z:function(){return i}});n(2791);var r=n(4364),a=n(8317),o=n(184),s=(0,a.Z)((function(t){return{badge:{right:8,top:32,border:"2px solid ".concat(t.palette.background.paper),padding:"5px 5px",borderRadius:"100%"}}}))(r.Z);function i(t){var e=t.isActive,n=t.children,r=t.border;return(0,o.jsx)(s,{variant:"dot",color:e?"secondary":"error",style:{border:r,borderRadius:"100%",padding:"4px"},children:n})}},9153:function(t,e,n){var r=n(7166),a=n(3032),o=n(3430),s=n(2791),i=n(1044),c=n(1876),l="http://localhost:5000";e.Z=function(){var t=(0,s.useState)(!1),e=(0,o.Z)(t,2),n=e[0],p=e[1],d=(0,s.useContext)(c.W5),u=d.postState,x=d.postDispatch,m=JSON.parse(localStorage.getItem("token")),h=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u.post.commentPagination.currentPage>u.post.commentPagination.totalPage)){t.next=2;break}return t.abrupt("return");case 2:return p(!0),t.prev=3,t.next=6,i.ZP.get("".concat(l,"/api/post/").concat(e,"/comment/?page=").concat(u.post.commentPagination.currentPage),{headers:{Authorization:"Bearer ".concat(m)}});case 6:(n=t.sent).data&&x({type:"COMMENT_PAGINATION",payload:{currentPage:n.data.pagination.currentPage+1,totalPage:n.data.pagination.totalPage,comments:n.data.comments}}),p(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),p(!1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u.postPagination.currentPage>u.postPagination.totalPage)){t.next=4;break}return t.abrupt("return");case 4:return p(!0),t.prev=5,t.next=8,i.ZP.get("".concat(l,"/api/post/?page=").concat(u.postPagination.currentPage),{headers:{Authorization:"Bearer ".concat(m)}});case 8:e=t.sent,(n=e.data)&&x({type:"POST_PAGINATION",payload:{currentPage:n.pagination.currentPage+1,totalPage:n.pagination.totalPage,posts:n.posts}}),p(!1),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),p(!1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(){return t.apply(this,arguments)}}();return{fetchPosts:g,fetchComments:h,loading:n}}},4500:function(t,e,n){n.r(e),n.d(e,{default:function(){return J}});var r=n(3364),a=n(8154),o=n(3712),s=n(1288),i=n(283),c=n(6950),l=n(272),p=n(8302),d=n(2953),u=n(6685),x=n(9526),m=n(6513),h=n(2426),g=n.n(h),f=n(2791),y=n(9538),j=n(1876),Z=n(9153),b=n(8096),v=n(3969),k=n(159),P=n(2067),S=n(7447),C=n(6364),w=n(4483),_=n(3174),E=n(1297),T=n(6990),I=n(184);var M=function(t){var e=t.comment,n=(0,f.useContext)(j.W5).postDispatch,r=(0,f.useContext)(j.St).userState,a=(0,f.useContext)(j.QE),o=a.uiDispatch,s=a.uiState,i=(0,I.jsxs)(b.Z,{alignItems:"flex-start",children:[(0,I.jsx)(v.Z,{children:e.user.profile_pic?(0,I.jsx)(l.Z,{children:(0,I.jsx)("img",{src:e.user.profile_pic,style:{width:"100%",height:"100%"},alt:e.user.name})}):(0,I.jsx)(C.Z,{text:e.user.name,bg:e.user.active?"seagreen":"tomato"})}),(0,I.jsx)(k.Z,{primary:(0,I.jsx)(p.Z,{style:{color:s.darkMode&&"#fff"},children:e.user.name}),secondary:(0,I.jsxs)(I.Fragment,{children:[e.body.text&&e.body.text,e.body.image&&(0,I.jsx)(x.Z,{elevation:0,style:{padding:"8px"},children:(0,I.jsx)(l.Z,{variant:"square",style:{width:"40%",height:"100%"},children:(0,I.jsx)("img",{src:e.body.image,style:{width:"100%",height:"100%"},alt:""})})})]})})]});return(0,I.jsx)("div",{style:{marginTop:"16px",marginBottom:!s.mdScreen&&"50px"},children:(0,I.jsxs)(P.Z,{children:[i,(0,I.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(0,I.jsxs)(m.Z,{onClick:function(){(0,T.UB)(e.id).then((function(t){t.data&&(n({type:"LIKE_UNLIKE_COMMENT",payload:t.data.comment}),o({type:"SET_MESSAGE",payload:{color:"success",text:t.data.message,display:!0}}))}))},size:"small",color:"primary",startIcon:e.likes.includes(r.currentUser.id)?(0,I.jsx)(w.G,{icon:_.u8Q,size:"sm"}):(0,I.jsx)(w.G,{icon:E.u8,size:"sm"}),children:["(",e.likes.length,")"]})}),(0,I.jsx)(S.Z,{variant:"inset",component:"li"})]})})},A=n(3430),D=n(1606),N=n(7025),O=n(4446),U=n(41),B=n(1417),F=n(7166),z=n(3032),R=n(1044),G=function(t){var e=t.post_id,n=t.commentText,r=t.setError,a=t.setCommentText,o=(0,f.useState)(!1),s=(0,A.Z)(o,2),i=s[0],c=s[1],l=(0,f.useContext)(j.W5).postDispatch,p=(0,f.useContext)(j.QE).uiDispatch,d=function(){var t=(0,z.Z)((0,F.Z)().mark((function t(){var o,s;return(0,F.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,o=JSON.parse(localStorage.getItem("token")),t.next=5,R.ZP.post("".concat("http://localhost:5000","/api/post/").concat(e,"/comment"),{text:n},{headers:{Authorization:"Bearer ".concat(o)}});case 5:(s=t.sent).data&&(a(""),l({type:"ADD_POST_COMMENT",payload:s.data.comment}),p({type:"SET_MESSAGE",payload:{color:"success",display:!0,text:s.data.message}})),c(!1),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),c(!1),console.log(t.t0),t.t0&&t.t0.response&&(422===t.t0.response.status&&r(t.t0.response.data.error),p({type:"SET_MESSAGE",payload:t.t0.response.data.error}));case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();return{createComment:d,loading:i}};var W=function(t){var e=t.post,n=(0,f.useContext)(j.St).userState,r=(0,f.useContext)(j.QE).uiState,a=(0,f.useState)(""),o=(0,A.Z)(a,2),i=o[0],c=o[1],p=(0,f.useState)(),d=(0,A.Z)(p,2),u=d[0],m=d[1],h=(0,f.useState)(""),g=(0,A.Z)(h,2),y=g[0],Z=g[1],b=G({post_id:e.id,commentText:i,setCommentText:c,setCommentImage:m,commentImage:u,setError:Z}),v=b.createComment,k=b.loading;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(s.Z,{container:!0,justify:"flex-start",spacing:1,style:{marginTop:"8px",marginBottom:"8px"},children:[(0,I.jsx)(s.Z,{item:!0,children:(0,I.jsx)(U.Z,{isActive:n.currentUser.active,children:n.currentUser.profile_pic?(0,I.jsx)(l.Z,{children:(0,I.jsx)("img",{src:n.currentUser.profile_pic,style:{width:"100%",height:"100%"},alt:n.currentUser.name})}):(0,I.jsx)(C.Z,{text:n.currentUser.name,bg:"tomato"})})}),(0,I.jsx)(s.Z,{item:!0,md:8,sm:8,xs:8,children:(0,I.jsx)(D.Z,{placeholder:"Write a Comments...",error:!!y,helperText:y,value:i,onChange:function(t){Z(""),c(t.target.value)},multiline:!0,rowsMax:4,style:{width:"100%",borderRadius:"20px",border:"none",background:r.darkMode?"rgb(24,25,26)":"rgb(240,242,245)",padding:"8px 16px"}})}),(0,I.jsx)(s.Z,{item:!0,ms:2,sm:2,xs:2,children:(0,I.jsx)(N.Z,{onClick:v,children:(0,I.jsx)(B.Z,{})})})]}),k?(0,I.jsx)(x.Z,{elevation:0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,I.jsx)(O.Z,{color:"primary",style:{width:"100%"}})}):null]})},Q=n(1787);var J=function(){var t=(0,f.useContext)(j.W5),e=t.postState,n=t.postDispatch,h=(0,f.useContext)(j.QE).uiState,b=(0,y.UO)(),v=(0,r.Z)(),k=(0,a.Z)(v.breakpoints.only("xs")),P=(0,Z.Z)().fetchComments;return(0,f.useEffect)((function(){var t=e.posts.find((function(t){return t.id==b.postId}));return n({type:"SET_CURRENT_POST",payload:t}),P(b.postId),function(){n({type:"REMOVE_CURRENT_POST"})}}),[]),(0,I.jsx)("div",{style:{paddingTop:"100px",minHeight:"100vh"},children:(0,I.jsx)(o.Z,{children:(0,I.jsxs)(s.Z,{container:!0,spacing:3,children:[(0,I.jsx)(s.Z,{item:!0,md:7,sm:12,xs:12,children:(0,I.jsxs)(i.Z,{style:{width:"100%",height:"80vh",position:"sticky",top:100,backgroundColor:h.darkMode&&"rgb(36,37,38)"},children:[e.post.user&&(0,I.jsx)(c.Z,{avatar:e.post.user.profile_pic?(0,I.jsx)(l.Z,{children:(0,I.jsx)("img",{src:e.post.user.profile_pic,style:{width:"100%",height:"100%"},alt:""})}):(0,I.jsx)(C.Z,{text:e.post.user.name,bg:e.post.user.active?"seagreen":"tomato"}),title:e.post&&(0,I.jsx)(p.Z,{style:{fontWeight:"800"},children:e.post.user.name}),subheader:g()(e.post.createdAt).fromNow()}),e.post.body&&(e.post.body.feelings||e.post.body.with.length||e.post.body.at||e.post.body.date)&&(0,I.jsx)(d.Z,{style:{marginBottom:"16px",background:h.darkMode?null:"rgb(240,242,245)",padding:"16px"},children:(0,I.jsx)(Q.Z,{post:e.post})}),(0,I.jsx)(d.Z,{children:(0,I.jsx)(p.Z,{style:{fontWeight:"400",fontSize:"16px",fontFamily:"fantasy"},children:e.post.content&&e.post.content})}),e.post.image&&(0,I.jsx)(u.Z,{component:"img",style:{width:"100%",height:"100%",objectFit:"contain"},image:e.post.image,title:"Paella dish"}),e.post.profilePostData&&Object.keys(e.post.profilePostData).length?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{style:{width:"100%",height:"200px"},image:e.post.profilePostData.coverImage,title:e.post.user.name}),(0,I.jsx)(l.Z,{style:{border:"6px solid tomato",width:k?"300px":"400px",height:k?"300px":"400px",display:"flex",flexDirection:"row",margin:"auto",borderRadius:"100%",bottom:130},children:(0,I.jsx)("img",{src:e.post.profilePostData.profileImage,width:"100%",height:"100%",alt:""})})]}):null]})}),(0,I.jsxs)(s.Z,{item:!0,md:5,sm:12,xs:12,style:{marginBottom:h.mdScreen?"0px":"70px"},children:[(0,I.jsx)(x.Z,{style:{padding:"16px",backgroundColor:h.darkMode&&"rgb(36,37,38)"},children:(0,I.jsx)(W,{post:e.post})}),e.post.comments&&e.post.comments.length?(0,I.jsxs)(I.Fragment,{children:[e.post.comments.map((function(t){return(0,I.jsx)("div",{children:(0,I.jsx)(M,{comment:t})},t.id)})),(0,I.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:e.post.commentPagination.totalPage==e.post.commentPagination.currentPage?(0,I.jsx)(p.Z,{variant:"h6",color:"primary",children:"No more comments"}):(0,I.jsx)(m.Z,{variant:"contained",color:"primary",onClick:function(){P(b.postId)},children:"More Comments"})})]}):null]})]})})})}},6990:function(t,e,n){n.d(e,{Qy:function(){return i},UB:function(){return c}});var r=n(7166),a=n(3032),o=n(1044),s="http://localhost:5000",i=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.token),t.prev=1,t.next=4,o.ZP.get("".concat(s,"/api/post/").concat(e,"/like_dislike"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(!(a=t.sent).data){t.next=7;break}return t.abrupt("return",{data:a.data});case 7:t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(1),console.log(t.t0),!t.t0||!t.t0.response){t.next=14;break}return t.abrupt("return",{status:t.t0.response.status,error:t.t0.response.data.error});case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.parse(localStorage.token),t.next=4,o.ZP.get("".concat(s,"/api/post/comment/").concat(e,"/like_dislike"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(!(a=t.sent).data){t.next=7;break}return t.abrupt("return",{data:a.data});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=500.1490ed1b.chunk.js.map