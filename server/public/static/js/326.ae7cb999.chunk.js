"use strict";(self.webpackChunkfacebook_clone_app_react_client=self.webpackChunkfacebook_clone_app_react_client||[]).push([[326],{7635:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(3738),a=n(3430),c=n(2791),o=n(9526),l=n(1288),i=n(7447),u=n(8167),s=n(8192),p=n(1370),m=n(1971),d=n(8596),f=n(8302),h=n(4364),v=n(7025),g=n(272),Z=n(3837),E=n(5159),x=n(4026),y=n(269),b=n(6513),k=n(9538),S=n(6364),C=n(7166),w=n(3032),_=n(1044),P=n(1876),U=n(5032),D="http://localhost:5000",z=function(e){var t=e.profile_pic,n=e.cover_pic,r=e.history,o=(0,c.useState)(!1),l=(0,a.Z)(o,2),i=l[0],u=l[1],s=(0,c.useContext)(P.St),p=s.userState,m=s.userDispatch,d=(0,c.useContext)(P.QE).uiDispatch,f=function(){var e=(0,w.Z)((0,C.Z)().mark((function e(t){var n,a;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,n=JSON.parse(localStorage.getItem("token")),e.next=5,_.ZP.put("".concat(D,"/api/user/profile_pic/update"),{profile_url:t},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(a=e.sent).data&&(d({type:"SET_MESSAGE",payload:{text:a.data.message,color:"success",display:!0}}),m({type:"UPDATE_USER",payload:a.data.user})),u(!1),r.push("/home"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),u(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,w.Z)((0,C.Z)().mark((function e(t){var n,a;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,n=JSON.parse(localStorage.getItem("token")),e.next=5,_.ZP.put("".concat(D,"/api/user/cover_pic/update"),{cover_url:t},{headers:{Authorization:"Bearer ".concat(n)}});case 5:(a=e.sent).data&&(d({type:"SET_MESSAGE",payload:{text:a.data.message,color:"success",display:!0}}),m({type:"UPDATE_USER",payload:a.data.user})),u(!1),r.push("/home"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),u(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return{updateProfilePic:function(){var e="profile_pic/".concat(p.currentUser.name,"-").concat(Date.now(),"-").concat(t.name);U.t.ref("images/".concat(e)).put(t).on("state_changed",(function(){u(!0)}),(function(e){console.log("error from firebase"),u(!1)}),(function(){U.t.ref("images").child(e).getDownloadURL().then((function(e){f(e)}))}))},updateCoverPic:function(){var e="cover_pic/".concat(p.currentUser.name,"-").concat(Date.now(),"-").concat(n.name);U.t.ref("images/".concat(e)).put(n).on("state_changed",(function(){u(!0)}),(function(e){console.log("error from firebase"),u(!1)}),(function(){U.t.ref("images").child(e).getDownloadURL().then((function(e){h(e)}))}))},loading:i}},A=n(7780),I=n(3713);var R=function(e){var t=e.user,n=(0,c.useContext)(P.St).userState,r=(0,k.k6)(),o=(0,c.useState)(null),l=(0,a.Z)(o,2),i=l[0],u=l[1],s=(0,c.useState)(null),p=(0,a.Z)(s,2),m=p[0],d=p[1],f=(0,c.useState)(!1),C=(0,a.Z)(f,2),w=C[0],_=C[1],U=(0,c.useRef)(null),D=z({profile_pic:i,history:r}),R=D.updateProfilePic,T=D.loading,B=function(){u(null),d(null),_(!1)};return c.createElement("div",null,c.createElement(h.Z,{overlap:"rectangular",badgeContent:n.currentUser.id==t.id&&c.createElement(v.Z,{style:{bottom:-140,left:-20},onClick:function(){U.current.click()}},c.createElement(g.Z,null,c.createElement(A.Z,{style:{color:"black"}}))),style:{position:"absolute",bottom:-30,width:"170px",height:"170px",zIndex:2,left:"40%"}},t.profile_pic?c.createElement(g.Z,{style:{width:"170px",height:"170px"}},c.createElement("img",{src:t.profile_pic,width:"100%",height:"100%",alt:t.name})):c.createElement(S.Z,{text:t.name,bg:t.active?"seagreen":"tomato",fontSize:"40px",size:"170px"})),c.createElement("input",{style:{display:"none"},type:"file",accept:"image/*",ref:U,onChange:function(e){u(e.target.files[0]);var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=function(){d(t.result),_(!0)}}}),c.createElement(Z.Z,{disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,scroll:"body",maxWidth:"sm",open:w,onClose:function(){return _(!1)},style:{width:"100%"}},c.createElement(E.Z,null,"Profile Picture"),c.createElement(x.Z,null,m&&c.createElement("img",{src:m,width:"100%",height:"400px",alt:""})),c.createElement(y.Z,null,c.createElement(b.Z,{variant:"contained",onClick:function(){R(),B()},color:"primary"},"Upload"),c.createElement(b.Z,{variant:"contained",onClick:B,style:{backgroundColor:"tomato",color:"#fff"}},"Cancel"))),T&&c.createElement(I.Z,{loading:T,text:"Uploading Profile Pic..."}))};var T=function(){var e=(0,k.k6)(),t=(0,c.useState)(null),n=(0,a.Z)(t,2),r=n[0],o=n[1],l=(0,c.useState)(null),i=(0,a.Z)(l,2),u=i[0],s=i[1],p=(0,c.useState)(!1),m=(0,a.Z)(p,2),d=m[0],f=m[1],h=(0,c.useRef)(null),S=z({cover_pic:r,history:e}),C=S.updateCoverPic,w=S.loading,_=function(){o(null),s(null),f(!1)};return c.createElement("div",null,c.createElement(v.Z,{onClick:function(){h.current.click()},style:{position:"absolute",bottom:30,left:20,zIndex:2}},c.createElement(g.Z,null,c.createElement(A.Z,{style:{color:"blue"}}))),w&&c.createElement(I.Z,{loading:w,text:"Uploading Cover  Pic..."}),c.createElement("input",{style:{display:"none"},type:"file",accept:"image/*",ref:h,onChange:function(e){o(e.target.files[0]);var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=function(){s(t.result),f(!0)}}}),c.createElement(Z.Z,{disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,scroll:"body",maxWidth:"sm",open:d,onClose:function(){return f(!1)},style:{width:"100%"}},c.createElement(E.Z,null,"Cover Picture"),c.createElement(x.Z,null,u&&c.createElement("img",{src:u,width:"100%",height:"400px",alt:"preview"})),c.createElement(y.Z,null,c.createElement(b.Z,{variant:"contained",onClick:function(){C(),_()},color:"primary"},"Upload"),c.createElement(b.Z,{variant:"contained",onClick:_,style:{backgroundColor:"tomato",color:"#fff"}},"Cancel"))))},B=(0,d.Z)((function(e){return{paper:{width:"100%",height:"40vh",marginTop:"60px",position:"relative",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"100% 40vh"},overlay:{position:"absolute",background:"rgba(0,0,0,0.5)",width:"100%",height:"40vh",top:0}}}));var N=function(e){var t=e.user,n=(0,c.useContext)(P.St).userState,r=B();return c.createElement("div",null,c.createElement(l.Z,{container:!0,justifyContent:"center",alignItems:"center"},c.createElement(l.Z,{item:!0,xs:12,sm:12,md:6},c.createElement(o.Z,{elevation:10,className:r.paper,style:{backgroundImage:t.cover_image?"url("+t.cover_image+")":null}},c.createElement(R,{user:t,type:"profile"}),n.currentUser.id==t.id&&c.createElement(c.Fragment,null,c.createElement(T,null)),c.createElement("div",{className:r.overlay})))),c.createElement(l.Z,{container:!0,justifyContent:"center",alignItems:"center",style:{marginTop:"30px"}},c.createElement(l.Z,{item:!0,xs:12,sm:12,md:6,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"16px"}},c.createElement(f.Z,{style:{fontSize:"30px",fontWeight:"800"}},t.name))))},j=n(6414),M=n(9948);var O=function(e){var t=e.user,n=(0,c.useContext)(P.St).userState,r=(0,c.useContext)(P.W5).postState;return c.createElement(l.Z,{container:!0,justify:"center",style:{marginTop:"25px"},spacing:2},c.createElement(l.Z,{item:!0,xs:12,sm:12,md:8},n.currentUser.id==t.id&&c.createElement(j.Z,null),c.createElement(M.Z,{posts:r.posts.filter((function(e){return e.user.id==t.id}))})))};var J=function(e){var t=e.user;return c.createElement(l.Z,{container:!0,spacing:2},t.friends&&t.friends.map((function(e){return c.createElement(l.Z,{item:!0,xs:12,sm:6,md:6,key:e.id},c.createElement(o.Z,{style:{padding:"16px",display:"flex",flexDirection:"column",alignItems:"center"}},e.profile_pic?c.createElement(g.Z,{src:e.profile_pic,variant:"square"}):c.createElement(S.Z,{bg:e.active?"seagreen":"tomato",text:e.name,size:70}),c.createElement(f.Z,{style:{marginTop:"16px",flexGrow:1},variant:"h5",color:"inherit"},e.name),c.createElement(f.Z,{style:{marginTop:"6px",flexGrow:1},variant:"h6",color:"inherit"},e.email),c.createElement(b.Z,{variant:"contained",style:{backgroundColor:"tomato",color:"#fff",marginTop:"16px"}},"Unfriend")))})))},W=["children","value","index"];function F(e){var t=e.children,n=e.value,a=e.index,o=(0,r.Z)(e,W);return c.createElement("div",Object.assign({hidden:n!==a},o),n===a&&c.createElement(m.Z,{p:3},t))}var G=function(e){var t=e.user,n=e.conScreen,r=(0,c.useContext)(P.QE).uiState,m=c.useState(0),d=(0,a.Z)(m,2),f=d[0],h=d[1];return c.createElement("div",{style:{minHeight:"100vh"}},c.createElement(o.Z,{style:{width:"100%",backgroundColor:r.darkMode&&"rgb(36,37,38)"}},c.createElement(N,{user:t}),c.createElement(l.Z,{container:!0,justify:"center",alignItems:"center"},c.createElement(l.Z,{item:!0,xs:12,sm:12,md:6},c.createElement(i.Z,null),c.createElement(u.Z,{position:"static",style:{background:r.darkMode?"rgb(36,37,38)":"#fff",color:r.darkMode?"#fff":"black",alignItems:"center"},elevation:0},c.createElement(s.Z,{value:f,onChange:function(e,t){h(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary"},c.createElement(p.Z,{label:"Timeline"}),c.createElement(p.Z,{label:"Friends"})))))),c.createElement(l.Z,{container:!0,justify:"center"},c.createElement(l.Z,{item:!0,xs:12,sm:12,md:n?12:6},c.createElement(F,{value:f,index:0},c.createElement(O,{user:t})),c.createElement(F,{value:f,index:1},c.createElement(J,{user:t})))))}},6470:function(e,t,n){n.d(t,{$_:function(){return i},HM:function(){return s},Mi:function(){return l},QF:function(){return u}});var r=n(7166),a=n(3032),c=n(1044),o="http://localhost:5000",l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.token),e.prev=1,e.next=4,c.ZP.get("".concat(o,"/api/user/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(a=e.sent,!(l=a.data)){e.next=8;break}return e.abrupt("return",{data:l});case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=14;break}return e.abrupt("return",{error:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.token),e.prev=1,e.next=4,c.ZP.get("".concat(o,"/api/user/recommanded_users"),{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(n=e.sent,!(a=n.data)){e.next=8;break}return e.abrupt("return",{data:a});case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=14;break}return e.abrupt("return",{error:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.token),e.prev=1,e.next=4,c.ZP.get("".concat(o,"/api/user/friend_request/received"),{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(n=e.sent,!(a=n.data)){e.next=8;break}return e.abrupt("return",{data:a});case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=14;break}return e.abrupt("return",{error:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.token),e.prev=1,e.next=4,c.ZP.get("".concat(o,"/api/user/friend_request/sended"),{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(n=e.sent,!(a=n.data)){e.next=8;break}return e.abrupt("return",{data:a});case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=14;break}return e.abrupt("return",{error:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=326.ae7cb999.chunk.js.map