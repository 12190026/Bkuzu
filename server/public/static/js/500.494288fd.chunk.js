"use strict";(self.webpackChunkfacebook_clone_app_react_client=self.webpackChunkfacebook_clone_app_react_client||[]).push([[500],{1787:function(e,t,n){var a=n(8302),r=n(2791);t.Z=function(e){var t=e.post;return r.createElement("div",null,r.createElement(a.Z,null,r.createElement("b",null,(t.body.feelings||t.body.with.length||t.body.at||t.body.date)&&t.user.name),t.body.feelings?r.createElement(r.Fragment,null,"\xa0 is feeling ",r.createElement("b",null,t.body.feelings)):null,t.body.with.length?r.createElement(r.Fragment,null," with ",r.createElement("b",null,t.body.with.map((function(e){return r.createElement("span",{key:e.id}," \xa0",e.name,",")})))):null,t.body.at?r.createElement(r.Fragment,null," at "," ",r.createElement("b",null,t.body.at," ")):null,t.body.date?r.createElement(r.Fragment,null,r.createElement("b",null,new Date(t.body.date).toLocaleDateString())):null))}},41:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(2791),r=n(4364),o=(0,n(8317).Z)((function(e){return{badge:{right:8,top:32,border:"2px solid ".concat(e.palette.background.paper),padding:"5px 5px",borderRadius:"100%"}}}))(r.Z);function c(e){var t=e.isActive,n=e.children,r=e.border;return a.createElement(o,{variant:"dot",color:t?"secondary":"error",style:{border:r,borderRadius:"100%",padding:"4px"}},n)}},9153:function(e,t,n){var a=n(7166),r=n(3032),o=n(3430),c=n(2791),s=n(1044),l=n(1876),i="http://localhost:5000";t.Z=function(){var e=(0,c.useState)(!1),t=(0,o.Z)(e,2),n=t[0],p=t[1],m=(0,c.useContext)(l.W5),u=m.postState,d=m.postDispatch,g=JSON.parse(localStorage.getItem("token")),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.post.commentPagination.currentPage>u.post.commentPagination.totalPage)){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.prev=3,e.next=6,s.ZP.get("".concat(i,"/api/post/").concat(t,"/comment/?page=").concat(u.post.commentPagination.currentPage),{headers:{Authorization:"Bearer ".concat(g)}});case 6:(n=e.sent).data&&d({type:"COMMENT_PAGINATION",payload:{currentPage:n.data.pagination.currentPage+1,totalPage:n.data.pagination.totalPage,comments:n.data.comments}}),p(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),p(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.postPagination.currentPage>u.postPagination.totalPage)){e.next=4;break}return e.abrupt("return");case 4:return p(!0),e.prev=5,e.next=8,s.ZP.get("".concat(i,"/api/post/?page=").concat(u.postPagination.currentPage),{headers:{Authorization:"Bearer ".concat(g)}});case 8:t=e.sent,(n=t.data)&&d({type:"POST_PAGINATION",payload:{currentPage:n.pagination.currentPage+1,totalPage:n.pagination.totalPage,posts:n.posts}}),p(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),p(!1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return{fetchPosts:h,fetchComments:f,loading:n}}},4500:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var a=n(3364),r=n(8154),o=n(3712),c=n(1288),s=n(283),l=n(6950),i=n(272),p=n(8302),m=n(2953),u=n(6685),d=n(9526),g=n(6513),f=n(2426),h=n.n(f),E=n(2791),y=n(9538),x=n(1876),Z=n(9153),b=n(8096),v=n(3969),k=n(159),P=n(2067),S=n(7447),C=n(6364),w=n(4483),_=n(3174),T=n(1297),I=n(6990);var M=function(e){var t=e.comment,n=(0,E.useContext)(x.W5).postDispatch,a=(0,E.useContext)(x.St).userState,r=(0,E.useContext)(x.QE),o=r.uiDispatch,c=r.uiState,s=E.createElement(b.Z,{alignItems:"flex-start"},E.createElement(v.Z,null,t.user.profile_pic?E.createElement(i.Z,null,E.createElement("img",{src:t.user.profile_pic,style:{width:"100%",height:"100%"},alt:t.user.name})):E.createElement(C.Z,{text:t.user.name,bg:t.user.active?"seagreen":"tomato"})),E.createElement(k.Z,{primary:E.createElement(p.Z,{style:{color:c.darkMode&&"#fff"}},t.user.name),secondary:E.createElement(E.Fragment,null,t.body.text&&t.body.text,t.body.image&&E.createElement(d.Z,{elevation:0,style:{padding:"8px"}},E.createElement(i.Z,{variant:"square",style:{width:"40%",height:"100%"}},E.createElement("img",{src:t.body.image,style:{width:"100%",height:"100%"},alt:""}))))}));return E.createElement("div",{style:{marginTop:"16px",marginBottom:!c.mdScreen&&"50px"}},E.createElement(P.Z,null,s,E.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},E.createElement(g.Z,{onClick:function(){(0,I.UB)(t.id).then((function(e){e.data&&(n({type:"LIKE_UNLIKE_COMMENT",payload:e.data.comment}),o({type:"SET_MESSAGE",payload:{color:"success",text:e.data.message,display:!0}}))}))},size:"small",color:"primary",startIcon:t.likes.includes(a.currentUser.id)?E.createElement(w.G,{icon:_.u8Q,size:"sm"}):E.createElement(w.G,{icon:T.u8,size:"sm"})},"(",t.likes.length,")")),E.createElement(S.Z,{variant:"inset",component:"li"})))},A=n(3430),D=n(1606),N=n(7025),O=n(4446),U=n(41),B=n(1417),F=n(7166),z=n(3032),R=n(1044),G=function(e){var t=e.post_id,n=e.commentText,a=e.setError,r=e.setCommentText,o=(0,E.useState)(!1),c=(0,A.Z)(o,2),s=c[0],l=c[1],i=(0,E.useContext)(x.W5).postDispatch,p=(0,E.useContext)(x.QE).uiDispatch,m=function(){var e=(0,z.Z)((0,F.Z)().mark((function e(){var o,c;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,o=JSON.parse(localStorage.getItem("token")),e.next=5,R.ZP.post("".concat("http://localhost:5000","/api/post/").concat(t,"/comment"),{text:n},{headers:{Authorization:"Bearer ".concat(o)}});case 5:(c=e.sent).data&&(r(""),i({type:"ADD_POST_COMMENT",payload:c.data.comment}),p({type:"SET_MESSAGE",payload:{color:"success",display:!0,text:c.data.message}})),l(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),l(!1),console.log(e.t0),e.t0&&e.t0.response&&(422===e.t0.response.status&&a(e.t0.response.data.error),p({type:"SET_MESSAGE",payload:e.t0.response.data.error}));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return{createComment:m,loading:s}};var W=function(e){var t=e.post,n=(0,E.useContext)(x.St).userState,a=(0,E.useContext)(x.QE).uiState,r=(0,E.useState)(""),o=(0,A.Z)(r,2),s=o[0],l=o[1],p=(0,E.useState)(),m=(0,A.Z)(p,2),u=m[0],g=m[1],f=(0,E.useState)(""),h=(0,A.Z)(f,2),y=h[0],Z=h[1],b=G({post_id:t.id,commentText:s,setCommentText:l,setCommentImage:g,commentImage:u,setError:Z}),v=b.createComment,k=b.loading;return E.createElement(E.Fragment,null,E.createElement(c.Z,{container:!0,justify:"flex-start",spacing:1,style:{marginTop:"8px",marginBottom:"8px"}},E.createElement(c.Z,{item:!0},E.createElement(U.Z,{isActive:n.currentUser.active},n.currentUser.profile_pic?E.createElement(i.Z,null,E.createElement("img",{src:n.currentUser.profile_pic,style:{width:"100%",height:"100%"},alt:n.currentUser.name})):E.createElement(C.Z,{text:n.currentUser.name,bg:"tomato"}))),E.createElement(c.Z,{item:!0,md:8,sm:8,xs:8},E.createElement(D.Z,{placeholder:"Write a Comments...",error:!!y,helperText:y,value:s,onChange:function(e){Z(""),l(e.target.value)},multiline:!0,rowsMax:4,style:{width:"100%",borderRadius:"20px",border:"none",background:a.darkMode?"rgb(24,25,26)":"rgb(240,242,245)",padding:"8px 16px"}})),E.createElement(c.Z,{item:!0,ms:2,sm:2,xs:2},E.createElement(N.Z,{onClick:v},E.createElement(B.Z,null)))),k?E.createElement(d.Z,{elevation:0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"16px"}},E.createElement(O.Z,{color:"primary",style:{width:"100%"}})):null)},j=n(1787);var Q=function(){var e=(0,E.useContext)(x.W5),t=e.postState,n=e.postDispatch,f=(0,E.useContext)(x.QE).uiState,b=(0,y.UO)(),v=(0,a.Z)(),k=(0,r.Z)(v.breakpoints.only("xs")),P=(0,Z.Z)().fetchComments;return(0,E.useEffect)((function(){var e=t.posts.find((function(e){return e.id==b.postId}));return n({type:"SET_CURRENT_POST",payload:e}),P(b.postId),function(){n({type:"REMOVE_CURRENT_POST"})}}),[]),E.createElement("div",{style:{paddingTop:"100px",minHeight:"100vh"}},E.createElement(o.Z,null,E.createElement(c.Z,{container:!0,spacing:3},E.createElement(c.Z,{item:!0,md:7,sm:12,xs:12},E.createElement(s.Z,{style:{width:"100%",height:"80vh",position:"sticky",top:100,backgroundColor:f.darkMode&&"rgb(36,37,38)"}},t.post.user&&E.createElement(l.Z,{avatar:t.post.user.profile_pic?E.createElement(i.Z,null,E.createElement("img",{src:t.post.user.profile_pic,style:{width:"100%",height:"100%"},alt:""})):E.createElement(C.Z,{text:t.post.user.name,bg:t.post.user.active?"seagreen":"tomato"}),title:t.post&&E.createElement(p.Z,{style:{fontWeight:"800"}},t.post.user.name),subheader:h()(t.post.createdAt).fromNow()}),t.post.body&&(t.post.body.feelings||t.post.body.with.length||t.post.body.at||t.post.body.date)&&E.createElement(m.Z,{style:{marginBottom:"16px",background:f.darkMode?null:"rgb(240,242,245)",padding:"16px"}},E.createElement(j.Z,{post:t.post})),E.createElement(m.Z,null,E.createElement(p.Z,{style:{fontWeight:"400",fontSize:"16px",fontFamily:"fantasy"}},t.post.content&&t.post.content)),t.post.image&&E.createElement(u.Z,{component:"img",style:{width:"100%",height:"100%",objectFit:"contain"},image:t.post.image,title:"Paella dish"}),t.post.profilePostData&&Object.keys(t.post.profilePostData).length?E.createElement(E.Fragment,null,E.createElement(u.Z,{style:{width:"100%",height:"200px"},image:t.post.profilePostData.coverImage,title:t.post.user.name}),E.createElement(i.Z,{style:{border:"6px solid tomato",width:k?"300px":"400px",height:k?"300px":"400px",display:"flex",flexDirection:"row",margin:"auto",borderRadius:"100%",bottom:130}},E.createElement("img",{src:t.post.profilePostData.profileImage,width:"100%",height:"100%",alt:""}))):null)),E.createElement(c.Z,{item:!0,md:5,sm:12,xs:12,style:{marginBottom:f.mdScreen?"0px":"70px"}},E.createElement(d.Z,{style:{padding:"16px",backgroundColor:f.darkMode&&"rgb(36,37,38)"}},E.createElement(W,{post:t.post})),t.post.comments&&t.post.comments.length?E.createElement(E.Fragment,null,t.post.comments.map((function(e){return E.createElement("div",{key:e.id},E.createElement(M,{comment:e}))})),E.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.post.commentPagination.totalPage==t.post.commentPagination.currentPage?E.createElement(p.Z,{variant:"h6",color:"primary"},"No more comments"):E.createElement(g.Z,{variant:"contained",color:"primary",onClick:function(){P(b.postId)}},"More Comments"))):null))))}},6990:function(e,t,n){n.d(t,{Qy:function(){return s},UB:function(){return l}});var a=n(7166),r=n(3032),o=n(1044),c="http://localhost:5000",s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.token),e.prev=1,e.next=4,o.ZP.get("".concat(c,"/api/post/").concat(t,"/like_dislike"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(!(r=e.sent).data){e.next=7;break}return e.abrupt("return",{data:r.data});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(1),console.log(e.t0),!e.t0||!e.t0.response){e.next=14;break}return e.abrupt("return",{status:e.t0.response.status,error:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.parse(localStorage.token),e.next=4,o.ZP.get("".concat(c,"/api/post/comment/").concat(t,"/like_dislike"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(!(r=e.sent).data){e.next=7;break}return e.abrupt("return",{data:r.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=500.494288fd.chunk.js.map